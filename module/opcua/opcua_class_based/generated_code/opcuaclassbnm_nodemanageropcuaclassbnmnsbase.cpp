/******************************************************************************
** opcuaclassbnm_nodemanageropcuaclassbnmnsbase.cpp
**
**   **************************** auto-generated ****************************
**     This code was generated by a tool: UaModeler
**     Runtime Version: 1.8.0, using C++ OPC UA SDK 1.8.2 template (version 4)
**
**     Changes to this file may cause incorrect behavior and will be lost if
**     the code is regenerated.
**   **************************** auto-generated ****************************
**
** Copyright (c) 2006-2025 Unified Automation GmbH. All rights reserved.
**
** Software License Agreement ("SLA") Version 2.8
**
** Unless explicitly acquired and licensed from Licensor under another
** license, the contents of this file are subject to the Software License
** Agreement ("SLA") Version 2.8, or subsequent versions
** as allowed by the SLA, and You may not copy or use this file in either
** source code or executable form, except in compliance with the terms and
** conditions of the SLA.
**
** All software distributed under the SLA is provided strictly on an
** "AS IS" basis, WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
** AND LICENSOR HEREBY DISCLAIMS ALL SUCH WARRANTIES, INCLUDING WITHOUT
** LIMITATION, ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR
** PURPOSE, QUIET ENJOYMENT, OR NON-INFRINGEMENT. See the SLA for specific
** language governing rights and limitations under the SLA.
**
** The complete license agreement can be found here:
** http://unifiedautomation.com/License/SLA/2.8/
**
** Project: C++ OPC Server SDK information model for namespace http://opcfoundation.org/UA/BNM/
**
** Description: OPC Unified Architecture Software Development Kit.
**
******************************************************************************/

#include "opcuaclassbnm_nodemanageropcuaclassbnmnsbase.h"
#include "opcuaclassbnm_instancefactory_opcuaclassbnmns.h"
#include "opcuaclassbnm_browsenames.h"

// Include type headers
#include "opcuaclassbnm_datatypes.h"
#include <uabasenodes.h>
#include "opcuaclassbnm_bnmrequesttype.h"
#include "opcuaclassbnm_ibaseethernetcapabilitiestype.h"
#include "opcuaclassbnm_iieeeautonegotiationstatustype.h"
#include "opcuaclassbnm_iieeebaseethernetporttype.h"
#include "opcuaclassbnm_iieeebasetsnstatusstreamtype.h"
#include "opcuaclassbnm_iieeebasetsnstreamtype.h"
#include "opcuaclassbnm_iieeebasetsntrafficspecificationtype.h"
#include "opcuaclassbnm_iieeetsninterfaceconfigurationlistenertype.h"
#include "opcuaclassbnm_iieeetsninterfaceconfigurationtalkertype.h"
#include "opcuaclassbnm_iieeetsninterfaceconfigurationtype.h"
#include "opcuaclassbnm_iieeetsnmacaddresstype.h"
#include "opcuaclassbnm_iieeetsnvlantagtype.h"
#include "opcuaclassbnm_iietfbasenetworkinterfacetype.h"
#include "opcuaclassbnm_iprioritymappingentrytype.h"
#include "opcuaclassbnm_isrclasstype.h"
#include "opcuaclassbnm_ivlanidtype.h"
#include "opcuaclassbnm_ieeebasetsnstatusstreamtype.h"
#include "opcuaclassbnm_ieeebasetsnstreamtype.h"
#include "opcuaclassbnm_ieeebasetsntrafficspecificationtype.h"
#include "opcuaclassbnm_ieeetsninterfaceconfigurationlistenertype.h"
#include "opcuaclassbnm_ieeetsninterfaceconfigurationtalkertype.h"
#include "opcuaclassbnm_ieeetsninterfaceconfigurationtype.h"
#include "opcuaclassbnm_ieeetsnmacaddresstype.h"
#include "opcuaclassbnm_ieeetsnvlantagtype.h"
#include "opcuaclassbnm_ietfbasenetworkinterfacetype.h"
#include "opcua_foldertype.h"
#include "opcua_namespacemetadatatype.h"
#include "opcua_propertytype.h"
#include "instancefactory.h"
#include "nodeaccessinfobase.h"
#include "nodemanagerroot.h"
#include "opcua_foldertype.h"
#include "uasimpledefinition.h"

// Namespace for the UA information model http://opcfoundation.org/UA/BNM/
namespace OpcUaClassBnm {
OpcUa_UInt16 NodeManagerOpcUaClassBnmNSBase::s_namespaceIndex = 0;

/** Construction of the class NodeManagerOpcUaClassBnmNSBase.
*/
NodeManagerOpcUaClassBnmNSBase::NodeManagerOpcUaClassBnmNSBase(
    OpcUa_Boolean firesEvents,  //!< [in] Flag indicating if the NodeManager should activate the EventManager
    OpcUa_Int32 nHashTableSize) //!< [in] Initial size of the hash table. The hash table will grow in steps if the total
                                //! number of nodes reaches the initial size. The default value is 10.007.<br>
                                //! For best performance set the initial size to a value bigger than the total number of nodes that will be added (if known).
                                //! Preferred sizes are 1.009, 10.007, 100.003, 1.000.003, 10.000.019
: NodeManagerBase("http://opcfoundation.org/UA/BNM/", firesEvents, nHashTableSize)
{
    m_defaultLocaleId         = "en";

    OpcUaClassBnm::DataTypes::registerStructuredTypes();
}

/** Finish start up in derived class after starting up base class.
*/
UaStatus NodeManagerOpcUaClassBnmNSBase::afterStartUp()
{
    UaStatus ret;

    s_namespaceIndex = getNameSpaceIndex();

    ret = createDataTypeNodes();
    UA_ASSERT(ret.isGood());
    ret = createReferenceTypeNodes();
    UA_ASSERT(ret.isGood());

    // ------------------------------------------------------------
    // Create object type nodes
    // ------------------------------------------------------------
    IBaseEthernetCapabilitiesType::createTypes();
    IIeeeAutoNegotiationStatusType::createTypes();
    IIeeeBaseEthernetPortType::createTypes();
    IIeeeBaseTsnStatusStreamType::createTypes();
    IIeeeBaseTsnStreamType::createTypes();
    IIeeeBaseTsnTrafficSpecificationType::createTypes();
    IIeeeTsnInterfaceConfigurationType::createTypes();
    IIeeeTsnInterfaceConfigurationListenerType::createTypes();
    IIeeeTsnInterfaceConfigurationTalkerType::createTypes();
    IIeeeTsnMacAddressType::createTypes();
    IIeeeTsnVlanTagType::createTypes();
    IIetfBaseNetworkInterfaceType::createTypes();
    IPriorityMappingEntryType::createTypes();
    ISrClassType::createTypes();
    IVlanIdType::createTypes();
    BnmRequestType::createTypes();
    IeeeBaseTsnStatusStreamType::createTypes();
    IeeeBaseTsnStreamType::createTypes();
    IeeeBaseTsnTrafficSpecificationType::createTypes();
    IeeeTsnInterfaceConfigurationType::createTypes();
    IeeeTsnInterfaceConfigurationListenerType::createTypes();
    IeeeTsnInterfaceConfigurationTalkerType::createTypes();
    IeeeTsnMacAddressType::createTypes();
    IeeeTsnVlanTagType::createTypes();
    IetfBaseNetworkInterfaceType::createTypes();
    // ------------------------------------------------------------

    // ------------------------------------------------------------
    // Create variable type nodes
    // ------------------------------------------------------------
    // ------------------------------------------------------------

    XmlUaNodeFactoryManager factory;

    ret = addObjectsFolderServerNamespaceshttp___opcfoundation_org_UA_BNM_(factory);
    UA_ASSERT(ret.isGood());
    if (ret.isBad()) return ret;
    ret = addObjectsFolderServerResources(factory);
    UA_ASSERT(ret.isGood());
    if (ret.isBad()) return ret;
    ret = addObjectsFolderServerResourcesCommunication(factory);
    UA_ASSERT(ret.isGood());
    if (ret.isBad()) return ret;
    ret = addAdditionalHierarchicalReferences();
    UA_ASSERT(ret.isGood());
    if (ret.isBad()) return ret;
    ret = addAdditionalNonHierarchicalReferences();
    UA_ASSERT(ret.isGood());
    if (ret.isBad()) return ret;


#if SUPPORT_Event_Subscription_Server_Facet
    std::set<UaNodeId> setBrowsedNodes;
    recursiveRegisterEventSources(OpcUaId_Server, setBrowsedNodes);
    setBrowsedNodes.clear();
#endif // SUPPORT_Event_Subscription_Server_Facet


    return ret;
}

/** Returns the UaNode factory for the namespace if supported by the NodeManager
*
* The caller of the method is responsible for deleting the returned object.
*
*  @param namespaceIndex Namespace index assigned to the NodeManager.
*  @return The requested factory or NULL if not supported for the NodeManager.
*/
XmlUaNodeFactoryNamespace* NodeManagerOpcUaClassBnmNSBase::getUaNodeFactory(OpcUa_UInt16 namespaceIndex) const
{
    InstanceFactoryOpcUaClassBnmNS* pRet = new InstanceFactoryOpcUaClassBnmNS(namespaceIndex);
    return pRet;
}

/** Static method to get the namespace index for the type namespace managed by this class.
 */
OpcUa_UInt16 NodeManagerOpcUaClassBnmNSBase::getTypeNamespace()
{
    return s_namespaceIndex;
}


/** Helper function to create data type related nodes.
*/
UaStatus NodeManagerOpcUaClassBnmNSBase::createDataTypeNodes()
{
    UaStatus ret;

    ret = addTypeDictionary(OpcUaClassBnm_NameSpaceUri);
    if (ret.isNotGood())
    {
        return ret;
    }

    /******** Add Enumeration Types *******/
    UaEnumValue enumValue;
    // Duplex
    UaEnumDefinition duplexEnum;
    duplexEnum.setName("Duplex");
    duplexEnum.setDataTypeId(UaNodeId(OpcUaClassBnmId_Duplex, getNameSpaceIndex()));
    duplexEnum.setIsAbstract(false);
    duplexEnum.setNamespace(OpcUaClassBnm_NameSpaceUri);

    enumValue = UaEnumValue();
    enumValue.setName("full");
    enumValue.setValue(0);
    enumValue.setDocumentation(UaLocalizedText("", "Full duplex."));
    duplexEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("half");
    enumValue.setValue(1);
    enumValue.setDocumentation(UaLocalizedText("", "Half duplex."));
    duplexEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("unknown");
    enumValue.setValue(2);
    enumValue.setDocumentation(UaLocalizedText("", "Link is currently disconnected or initializing."));
    duplexEnum.addChild(enumValue);
    ret = addEnumeratedType(duplexEnum, UaNodeId(OpcUaClassBnmId_Duplex_EnumValues, getNameSpaceIndex()));
    UA_ASSERT(ret.isGood());

    // InterfaceAdminStatus
    UaEnumDefinition interfaceAdminStatusEnum;
    interfaceAdminStatusEnum.setName("InterfaceAdminStatus");
    interfaceAdminStatusEnum.setDataTypeId(UaNodeId(OpcUaClassBnmId_InterfaceAdminStatus, getNameSpaceIndex()));
    interfaceAdminStatusEnum.setIsAbstract(false);
    interfaceAdminStatusEnum.setNamespace(OpcUaClassBnm_NameSpaceUri);

    enumValue = UaEnumValue();
    enumValue.setName("up");
    enumValue.setValue(0);
    enumValue.setDocumentation(UaLocalizedText("", "Ready to pass packets."));
    interfaceAdminStatusEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("down");
    enumValue.setValue(1);
    enumValue.setDocumentation(UaLocalizedText("", "Not ready to pass packets and not in some test mode."));
    interfaceAdminStatusEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("testing");
    enumValue.setValue(2);
    enumValue.setDocumentation(UaLocalizedText("", "In some test mode."));
    interfaceAdminStatusEnum.addChild(enumValue);
    ret = addEnumeratedType(interfaceAdminStatusEnum, UaNodeId(OpcUaClassBnmId_InterfaceAdminStatus_EnumValues, getNameSpaceIndex()));
    UA_ASSERT(ret.isGood());

    // InterfaceOperStatus
    UaEnumDefinition interfaceOperStatusEnum;
    interfaceOperStatusEnum.setName("InterfaceOperStatus");
    interfaceOperStatusEnum.setDataTypeId(UaNodeId(OpcUaClassBnmId_InterfaceOperStatus, getNameSpaceIndex()));
    interfaceOperStatusEnum.setIsAbstract(false);
    interfaceOperStatusEnum.setNamespace(OpcUaClassBnm_NameSpaceUri);

    enumValue = UaEnumValue();
    enumValue.setName("up");
    enumValue.setValue(0);
    enumValue.setDocumentation(UaLocalizedText("", "Ready to pass packets."));
    interfaceOperStatusEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("down");
    enumValue.setValue(1);
    enumValue.setDocumentation(UaLocalizedText("", "The interface does not pass any packets."));
    interfaceOperStatusEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("testing");
    enumValue.setValue(2);
    enumValue.setDocumentation(UaLocalizedText("", "In some test mode. No operational packets can be passed."));
    interfaceOperStatusEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("unknown");
    enumValue.setValue(3);
    enumValue.setDocumentation(UaLocalizedText("", "Status cannot be determined for some reason."));
    interfaceOperStatusEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("dormant");
    enumValue.setValue(4);
    enumValue.setDocumentation(UaLocalizedText("", "Waiting for some external event."));
    interfaceOperStatusEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("not_present");
    enumValue.setValue(5);
    enumValue.setDocumentation(UaLocalizedText("", "Some component (typically hardware) is missing."));
    interfaceOperStatusEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("lower_layer_down");
    enumValue.setValue(6);
    enumValue.setDocumentation(UaLocalizedText("", "Down due to state of lower-layer interface(s)."));
    interfaceOperStatusEnum.addChild(enumValue);
    ret = addEnumeratedType(interfaceOperStatusEnum, UaNodeId(OpcUaClassBnmId_InterfaceOperStatus_EnumValues, getNameSpaceIndex()));
    UA_ASSERT(ret.isGood());

    // NegotiationStatus
    UaEnumDefinition negotiationStatusEnum;
    negotiationStatusEnum.setName("NegotiationStatus");
    negotiationStatusEnum.setDataTypeId(UaNodeId(OpcUaClassBnmId_NegotiationStatus, getNameSpaceIndex()));
    negotiationStatusEnum.setIsAbstract(false);
    negotiationStatusEnum.setNamespace(OpcUaClassBnm_NameSpaceUri);

    enumValue = UaEnumValue();
    enumValue.setName("in_progress");
    enumValue.setValue(0);
    enumValue.setDocumentation(UaLocalizedText("", "The auto-negotiation protocol is running and negotiation is currently in-progress."));
    negotiationStatusEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("complete");
    enumValue.setValue(1);
    enumValue.setDocumentation(UaLocalizedText("", "The auto-negotiation protocol has completed successfully."));
    negotiationStatusEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("failed");
    enumValue.setValue(2);
    enumValue.setDocumentation(UaLocalizedText("", "The auto-negotiation protocol has failed."));
    negotiationStatusEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("unknown");
    enumValue.setValue(3);
    enumValue.setDocumentation(UaLocalizedText("", "The auto-negotiation status is not currently known, this could be because it is still negotiating or the protocol cannot run (e.g., if no medium is present)."));
    negotiationStatusEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("no_negotiation");
    enumValue.setValue(4);
    enumValue.setDocumentation(UaLocalizedText("", "No auto-negotiation is executed. The auto-negotiation function is either not supported on this interface or has not been enabled."));
    negotiationStatusEnum.addChild(enumValue);
    ret = addEnumeratedType(negotiationStatusEnum, UaNodeId(OpcUaClassBnmId_NegotiationStatus_EnumValues, getNameSpaceIndex()));
    UA_ASSERT(ret.isGood());

    // TsnFailureCode
    UaEnumDefinition tsnFailureCodeEnum;
    tsnFailureCodeEnum.setName("TsnFailureCode");
    tsnFailureCodeEnum.setDataTypeId(UaNodeId(OpcUaClassBnmId_TsnFailureCode, getNameSpaceIndex()));
    tsnFailureCodeEnum.setIsAbstract(false);
    tsnFailureCodeEnum.setNamespace(OpcUaClassBnm_NameSpaceUri);

    enumValue = UaEnumValue();
    enumValue.setName("noFailure");
    enumValue.setValue(0);
    enumValue.setDocumentation(UaLocalizedText("", "No failure"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("insufficientBandwidth");
    enumValue.setValue(1);
    enumValue.setDocumentation(UaLocalizedText("", "Insufficient bandwidth"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("insufficientResources");
    enumValue.setValue(2);
    enumValue.setDocumentation(UaLocalizedText("", "Insufficient bridge resources"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("insufficientTrafficClassBandwidth");
    enumValue.setValue(3);
    enumValue.setDocumentation(UaLocalizedText("", "Insufficient bandwidth for Traffic Class"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("streamIDInUse");
    enumValue.setValue(4);
    enumValue.setDocumentation(UaLocalizedText("", "StreamID in use by another Talker"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("streamDestinationAddressInUse");
    enumValue.setValue(5);
    enumValue.setDocumentation(UaLocalizedText("", "Stream destination address already in use"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("streamPreemptedByHigherRank");
    enumValue.setValue(6);
    enumValue.setDocumentation(UaLocalizedText("", "Stream pre-empted by higher rank"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("latencyHasChanged");
    enumValue.setValue(7);
    enumValue.setDocumentation(UaLocalizedText("", "Reported latency has changed"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("egressPortNotAVBCapable");
    enumValue.setValue(8);
    enumValue.setDocumentation(UaLocalizedText("", "Egress port is not AVBCapable"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("useDifferentDestinationAddress");
    enumValue.setValue(9);
    enumValue.setDocumentation(UaLocalizedText("", "Use a different destination address"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("outOfMSRPResources");
    enumValue.setValue(10);
    enumValue.setDocumentation(UaLocalizedText("", "Out of MSRP resources"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("outOfMMRPResources");
    enumValue.setValue(11);
    enumValue.setDocumentation(UaLocalizedText("", "Out of MMRP resources"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("cannotStoreDestinationAddress");
    enumValue.setValue(12);
    enumValue.setDocumentation(UaLocalizedText("", "Cannot store destination address"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("priorityIsNoAnSRCLass");
    enumValue.setValue(13);
    enumValue.setDocumentation(UaLocalizedText("", "Requested priority is not an SR Class priority"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("maxFrameSizeTooLarge");
    enumValue.setValue(14);
    enumValue.setDocumentation(UaLocalizedText("", "MaxFrameSize is too large for media"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("maxFanInPortsLimitReached");
    enumValue.setValue(15);
    enumValue.setDocumentation(UaLocalizedText("", "maxFanInPorts limit has been reached"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("firstValueChangedForStreamID");
    enumValue.setValue(16);
    enumValue.setDocumentation(UaLocalizedText("", "Changes in FirstValue for a registered StreamID"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("vlanBlockedOnEgress");
    enumValue.setValue(17);
    enumValue.setDocumentation(UaLocalizedText("", "VLAN is blocked on this egress port (Registration Forbidden)"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("vlanTaggingDisabledOnEgress");
    enumValue.setValue(18);
    enumValue.setDocumentation(UaLocalizedText("", "VLAN tagging is disabled on this egress port (untagged set)"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("srClassPriorityMismatch");
    enumValue.setValue(19);
    enumValue.setDocumentation(UaLocalizedText("", "SR class priority mismatch"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("featureNotPropagated");
    enumValue.setValue(20);
    enumValue.setDocumentation(UaLocalizedText("", "Enhanced feature cannot be propagated to original Port"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("maxLatencyExceeded");
    enumValue.setValue(21);
    enumValue.setDocumentation(UaLocalizedText("", "MaxLatency exceeded"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("bridgeDoesNotProvideNetworkID");
    enumValue.setValue(22);
    enumValue.setDocumentation(UaLocalizedText("", "Nearest Bridge cannot provide network identification for stream transformation"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("streamTransformNotSupported");
    enumValue.setValue(23);
    enumValue.setDocumentation(UaLocalizedText("", "Stream transformation not supported"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("streamIDTypeNotSupported");
    enumValue.setValue(24);
    enumValue.setDocumentation(UaLocalizedText("", "Stream identification type not supported for stream transformation"));
    tsnFailureCodeEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("featureNotSupported");
    enumValue.setValue(25);
    enumValue.setDocumentation(UaLocalizedText("", "Enhanced feature cannot be supported without a CNC"));
    tsnFailureCodeEnum.addChild(enumValue);
    ret = addEnumeratedType(tsnFailureCodeEnum, UaNodeId(OpcUaClassBnmId_TsnFailureCode_EnumValues, getNameSpaceIndex()));
    UA_ASSERT(ret.isGood());

    // TsnListenerStatus
    UaEnumDefinition tsnListenerStatusEnum;
    tsnListenerStatusEnum.setName("TsnListenerStatus");
    tsnListenerStatusEnum.setDataTypeId(UaNodeId(OpcUaClassBnmId_TsnListenerStatus, getNameSpaceIndex()));
    tsnListenerStatusEnum.setIsAbstract(false);
    tsnListenerStatusEnum.setNamespace(OpcUaClassBnm_NameSpaceUri);

    enumValue = UaEnumValue();
    enumValue.setName("None");
    enumValue.setValue(0);
    tsnListenerStatusEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("Ready");
    enumValue.setValue(1);
    tsnListenerStatusEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("PartialFailed");
    enumValue.setValue(2);
    tsnListenerStatusEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("Failed");
    enumValue.setValue(3);
    tsnListenerStatusEnum.addChild(enumValue);
    ret = addEnumeratedType(tsnListenerStatusEnum, UaNodeId(OpcUaClassBnmId_TsnListenerStatus_EnumStrings, getNameSpaceIndex()));
    UA_ASSERT(ret.isGood());

    // TsnStreamState
    UaEnumDefinition tsnStreamStateEnum;
    tsnStreamStateEnum.setName("TsnStreamState");
    tsnStreamStateEnum.setDataTypeId(UaNodeId(OpcUaClassBnmId_TsnStreamState, getNameSpaceIndex()));
    tsnStreamStateEnum.setIsAbstract(false);
    tsnStreamStateEnum.setNamespace(OpcUaClassBnm_NameSpaceUri);

    enumValue = UaEnumValue();
    enumValue.setName("Disabled");
    enumValue.setValue(0);
    enumValue.setDocumentation(UaLocalizedText("", "The related TSN Stream is currently disabled."));
    tsnStreamStateEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("Configuring");
    enumValue.setValue(1);
    enumValue.setDocumentation(UaLocalizedText("", "The related TSN Stream is in the process of receiving configuration parameters from the TSN Control Layer."));
    tsnStreamStateEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("Ready");
    enumValue.setValue(2);
    enumValue.setDocumentation(UaLocalizedText("", "The related TSN Stream has successfully received and applied the configuration from the TSN Control Layer. The related TSN Stream is not fully operational as long as local preconditions (e.g. synchronization state) are not valid."));
    tsnStreamStateEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("Operational");
    enumValue.setValue(3);
    enumValue.setDocumentation(UaLocalizedText("", "The related TSN Stream object is configured and all other required preconditions (e.g. synchronization state) for sending / receiving data are valid."));
    tsnStreamStateEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("Error");
    enumValue.setValue(4);
    enumValue.setDocumentation(UaLocalizedText("", "The related TSN Stream object is in an error state."));
    tsnStreamStateEnum.addChild(enumValue);
    ret = addEnumeratedType(tsnStreamStateEnum, UaNodeId(OpcUaClassBnmId_TsnStreamState_EnumValues, getNameSpaceIndex()));
    UA_ASSERT(ret.isGood());

    // TsnTalkerStatus
    UaEnumDefinition tsnTalkerStatusEnum;
    tsnTalkerStatusEnum.setName("TsnTalkerStatus");
    tsnTalkerStatusEnum.setDataTypeId(UaNodeId(OpcUaClassBnmId_TsnTalkerStatus, getNameSpaceIndex()));
    tsnTalkerStatusEnum.setIsAbstract(false);
    tsnTalkerStatusEnum.setNamespace(OpcUaClassBnm_NameSpaceUri);

    enumValue = UaEnumValue();
    enumValue.setName("None");
    enumValue.setValue(0);
    tsnTalkerStatusEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("Ready");
    enumValue.setValue(1);
    tsnTalkerStatusEnum.addChild(enumValue);
    enumValue = UaEnumValue();
    enumValue.setName("Failed");
    enumValue.setValue(2);
    tsnTalkerStatusEnum.addChild(enumValue);
    ret = addEnumeratedType(tsnTalkerStatusEnum, UaNodeId(OpcUaClassBnmId_TsnTalkerStatus_EnumStrings, getNameSpaceIndex()));
    UA_ASSERT(ret.isGood());


    /******** Add Structured Types *******/
    // IetfBaseNetworkInterfaceDataType
    UaStructureDefinition ietfBaseNetworkInterfaceDataTypeStructure;
    ietfBaseNetworkInterfaceDataTypeStructure.setName("IetfBaseNetworkInterfaceDataType");
    ietfBaseNetworkInterfaceDataTypeStructure.setDataTypeId(UaNodeId(OpcUaClassBnmId_IetfBaseNetworkInterfaceDataType, getNameSpaceIndex()));
    ietfBaseNetworkInterfaceDataTypeStructure.setIsAbstract(false);
    ietfBaseNetworkInterfaceDataTypeStructure.setBinaryEncodingId(UaNodeId(OpcUaClassBnmId_IetfBaseNetworkInterfaceDataType_Encoding_DefaultBinary, getNameSpaceIndex()));
    ietfBaseNetworkInterfaceDataTypeStructure.setXmlEncodingId(UaNodeId(OpcUaClassBnmId_IetfBaseNetworkInterfaceDataType_Encoding_DefaultXml, getNameSpaceIndex()));
    ietfBaseNetworkInterfaceDataTypeStructure.setNamespace(OpcUaClassBnm_NameSpaceUri);
    ietfBaseNetworkInterfaceDataTypeStructure.setBaseType(UaNodeId(OpcUaId_Structure));
    // IetfBaseNetworkInterfaceDataType Field PhysAddress
    UaStructureField ietfBaseNetworkInterfaceDataTypeStructure_Field_PhysAddress;
    ietfBaseNetworkInterfaceDataTypeStructure_Field_PhysAddress.setName("PhysAddress");
    UaSimpleDefinition ietfBaseNetworkInterfaceDataTypeStructure_Field_PhysAddress_SimpleDef = simpleDefinition(UaNodeId(OpcUaId_String));
    UA_ASSERT(!ietfBaseNetworkInterfaceDataTypeStructure_Field_PhysAddress_SimpleDef.isNull());
    ietfBaseNetworkInterfaceDataTypeStructure_Field_PhysAddress.setDataTypeId(UaNodeId(OpcUaId_String));
    ietfBaseNetworkInterfaceDataTypeStructure_Field_PhysAddress.setValueType(ietfBaseNetworkInterfaceDataTypeStructure_Field_PhysAddress_SimpleDef.builtInType());
    ietfBaseNetworkInterfaceDataTypeStructure_Field_PhysAddress.setValueRank(-1);
    ietfBaseNetworkInterfaceDataTypeStructure_Field_PhysAddress.setMaxStringLength(0);
    ietfBaseNetworkInterfaceDataTypeStructure_Field_PhysAddress.setOptional(true);
    ietfBaseNetworkInterfaceDataTypeStructure.addChild(ietfBaseNetworkInterfaceDataTypeStructure_Field_PhysAddress);
    ret = addStructuredType(ietfBaseNetworkInterfaceDataTypeStructure);
    UA_ASSERT(ret.isGood());

    // TsnStreamFailureSystemIdentifier
    UaStructureDefinition tsnStreamFailureSystemIdentifierStructure;
    tsnStreamFailureSystemIdentifierStructure.setName("TsnStreamFailureSystemIdentifier");
    tsnStreamFailureSystemIdentifierStructure.setDataTypeId(UaNodeId(OpcUaClassBnmId_TsnStreamFailureSystemIdentifier, getNameSpaceIndex()));
    tsnStreamFailureSystemIdentifierStructure.setIsAbstract(false);
    tsnStreamFailureSystemIdentifierStructure.setBinaryEncodingId(UaNodeId(OpcUaClassBnmId_TsnStreamFailureSystemIdentifier_Encoding_DefaultBinary, getNameSpaceIndex()));
    tsnStreamFailureSystemIdentifierStructure.setXmlEncodingId(UaNodeId(OpcUaClassBnmId_TsnStreamFailureSystemIdentifier_Encoding_DefaultXml, getNameSpaceIndex()));
    tsnStreamFailureSystemIdentifierStructure.setNamespace(OpcUaClassBnm_NameSpaceUri);
    tsnStreamFailureSystemIdentifierStructure.setBaseType(UaNodeId(OpcUaId_Structure));
    // TsnStreamFailureSystemIdentifier Field SystemIdentifier
    UaStructureField tsnStreamFailureSystemIdentifierStructure_Field_SystemIdentifier;
    tsnStreamFailureSystemIdentifierStructure_Field_SystemIdentifier.setName("SystemIdentifier");
    UaSimpleDefinition tsnStreamFailureSystemIdentifierStructure_Field_SystemIdentifier_SimpleDef = simpleDefinition(UaNodeId(OpcUaId_Byte));
    UA_ASSERT(!tsnStreamFailureSystemIdentifierStructure_Field_SystemIdentifier_SimpleDef.isNull());
    tsnStreamFailureSystemIdentifierStructure_Field_SystemIdentifier.setDataTypeId(UaNodeId(OpcUaId_Byte));
    tsnStreamFailureSystemIdentifierStructure_Field_SystemIdentifier.setValueType(tsnStreamFailureSystemIdentifierStructure_Field_SystemIdentifier_SimpleDef.builtInType());
    tsnStreamFailureSystemIdentifierStructure_Field_SystemIdentifier.setValueRank(1);
    UaUInt32Array arrayDimensions;
    arrayDimensions.create(1);
    arrayDimensions[ 0 ] = 8;
    tsnStreamFailureSystemIdentifierStructure_Field_SystemIdentifier.setArrayDimensions(arrayDimensions);
    tsnStreamFailureSystemIdentifierStructure_Field_SystemIdentifier.setMaxStringLength(0);
    tsnStreamFailureSystemIdentifierStructure.addChild(tsnStreamFailureSystemIdentifierStructure_Field_SystemIdentifier);
    ret = addStructuredType(tsnStreamFailureSystemIdentifierStructure);
    UA_ASSERT(ret.isGood());

    // UnsignedRationalNumber
    UaStructureDefinition unsignedRationalNumberStructure;
    unsignedRationalNumberStructure.setName("UnsignedRationalNumber");
    unsignedRationalNumberStructure.setDataTypeId(UaNodeId(OpcUaClassBnmId_UnsignedRationalNumber, getNameSpaceIndex()));
    unsignedRationalNumberStructure.setIsAbstract(false);
    unsignedRationalNumberStructure.setBinaryEncodingId(UaNodeId(OpcUaClassBnmId_UnsignedRationalNumber_Encoding_DefaultBinary, getNameSpaceIndex()));
    unsignedRationalNumberStructure.setXmlEncodingId(UaNodeId(OpcUaClassBnmId_UnsignedRationalNumber_Encoding_DefaultXml, getNameSpaceIndex()));
    unsignedRationalNumberStructure.setNamespace(OpcUaClassBnm_NameSpaceUri);
    unsignedRationalNumberStructure.setBaseType(UaNodeId(OpcUaId_Structure));
    // UnsignedRationalNumber Field Numerator
    UaStructureField unsignedRationalNumberStructure_Field_Numerator;
    unsignedRationalNumberStructure_Field_Numerator.setName("Numerator");
    unsignedRationalNumberStructure_Field_Numerator.setDocumentation(UaLocalizedText("", "The top number of the fraction."));
    UaSimpleDefinition unsignedRationalNumberStructure_Field_Numerator_SimpleDef = simpleDefinition(UaNodeId(OpcUaId_UInt32));
    UA_ASSERT(!unsignedRationalNumberStructure_Field_Numerator_SimpleDef.isNull());
    unsignedRationalNumberStructure_Field_Numerator.setDataTypeId(UaNodeId(OpcUaId_UInt32));
    unsignedRationalNumberStructure_Field_Numerator.setValueType(unsignedRationalNumberStructure_Field_Numerator_SimpleDef.builtInType());
    unsignedRationalNumberStructure_Field_Numerator.setValueRank(-1);
    unsignedRationalNumberStructure_Field_Numerator.setMaxStringLength(0);
    unsignedRationalNumberStructure.addChild(unsignedRationalNumberStructure_Field_Numerator);
    // UnsignedRationalNumber Field Denominator
    UaStructureField unsignedRationalNumberStructure_Field_Denominator;
    unsignedRationalNumberStructure_Field_Denominator.setName("Denominator");
    unsignedRationalNumberStructure_Field_Denominator.setDocumentation(UaLocalizedText("", "The bottom number of the fraction."));
    UaSimpleDefinition unsignedRationalNumberStructure_Field_Denominator_SimpleDef = simpleDefinition(UaNodeId(OpcUaId_UInt32));
    UA_ASSERT(!unsignedRationalNumberStructure_Field_Denominator_SimpleDef.isNull());
    unsignedRationalNumberStructure_Field_Denominator.setDataTypeId(UaNodeId(OpcUaId_UInt32));
    unsignedRationalNumberStructure_Field_Denominator.setValueType(unsignedRationalNumberStructure_Field_Denominator_SimpleDef.builtInType());
    unsignedRationalNumberStructure_Field_Denominator.setValueRank(-1);
    unsignedRationalNumberStructure_Field_Denominator.setMaxStringLength(0);
    unsignedRationalNumberStructure.addChild(unsignedRationalNumberStructure_Field_Denominator);
    ret = addStructuredType(unsignedRationalNumberStructure);
    UA_ASSERT(ret.isGood());

    return ret;
}

/** Helper function to create reference type related nodes.
*/
UaStatus NodeManagerOpcUaClassBnmNSBase::createReferenceTypeNodes()
{
    UaStatus                ret;
    UaGenericReferenceType* pReferenceType;
    UaNode*                 pNode;
    OpcUa_Int16             nsSuperTypeIdx;
    UaNodeId                superTypeNodeId;
    NodeManagerRoot*        pNMRoot = (NodeManagerRoot*)m_pServerManager->getNodeManagerRoot();

    // CommLinkTo
    nsSuperTypeIdx = NodeManagerRoot::getTypeNamespace();
    superTypeNodeId = UaNodeId(OpcUaId_Organizes, nsSuperTypeIdx);
    pNode = pNMRoot->getNode(superTypeNodeId);

    if ( pNode && pNode->nodeClass() == OpcUa_NodeClass_ReferenceType )
    {
        pReferenceType = new UaGenericReferenceType(
                    UaNodeId(OpcUaClassBnmId_CommLinkTo, getNameSpaceIndex()),
                    UaQualifiedName("CommLinkTo", getNameSpaceIndex()),
                    UaLocalizedText("", "CommLinkTo"),
                    UaLocalizedText("", ""),
                    OpcUa_False,
                    OpcUa_False,
                    UaLocalizedText("", "CommLinkFrom"),
                    (UaReferenceType*)pNode);
        ret = addNodeAndReference(superTypeNodeId, pReferenceType, OpcUaId_HasSubtype);
        UA_ASSERT(ret.isGood());
        pNode->releaseReference();
    }
    else
    {
        if ( pNode )
        {
            pNode->releaseReference();
        }
        UA_ASSERT(pNode);
    }

    return ret;
}

UaStatus NodeManagerOpcUaClassBnmNSBase::addObjectsFolderServerNamespaceshttp___opcfoundation_org_UA_BNM_(const XmlUaNodeFactoryManager &factory)
{
    UaStatus ret;
    UaVariant defaultValue;
    UaNodeId referenceTypeId;
    UaNodeId parentEventNodeId;
    UaBase::Object *phttp___opcfoundation_org_UA_BNM_ = new UaBase::Object(UaNodeId(OpcUaClassBnmId_Server_Namespaces_http___opcfoundation_org_UA_BNM_, getTypeNamespace()));
    phttp___opcfoundation_org_UA_BNM_->setBrowseName(UaQualifiedName("http://opcfoundation.org/UA/BNM/", getTypeNamespace()));
    phttp___opcfoundation_org_UA_BNM_->setDisplayName(UaLocalizedText("", "http://opcfoundation.org/UA/BNM/"));
    UaBase::FullReference reference;
    // IsNamespaceSubset
    UaBase::Variable *pIsNamespaceSubset = new UaBase::Variable(UaNodeId(OpcUaClassBnmId_Server_Namespaces_http___opcfoundation_org_UA_BNM__IsNamespaceSubset, getTypeNamespace()));
    pIsNamespaceSubset->setBrowseName(UaQualifiedName("IsNamespaceSubset", 0));
    pIsNamespaceSubset->setDisplayName(UaLocalizedText("", "IsNamespaceSubset"));
    pIsNamespaceSubset->setAccessLevel(1);
    pIsNamespaceSubset->setValueRank(-1);
    pIsNamespaceSubset->setDataTypeId(OpcUaId_Boolean);
    {
        defaultValue.setBool(OpcUa_False);
    }
    pIsNamespaceSubset->setValue(defaultValue);
    pIsNamespaceSubset->setTypeDefinitionId(OpcUaId_PropertyType);
    reference.setReferenceTypeId(OpcUaId_HasProperty);
    reference.setSourceNode(phttp___opcfoundation_org_UA_BNM_);
    reference.setTargetNode(pIsNamespaceSubset);
    phttp___opcfoundation_org_UA_BNM_->addFullReference(reference);
    pIsNamespaceSubset->addFullReference(reference);
    pIsNamespaceSubset->setParentNodeId(phttp___opcfoundation_org_UA_BNM_->nodeId());

    // NamespacePublicationDate
    UaBase::Variable *pNamespacePublicationDate = new UaBase::Variable(UaNodeId(OpcUaClassBnmId_Server_Namespaces_http___opcfoundation_org_UA_BNM__NamespacePublicationDate, getTypeNamespace()));
    pNamespacePublicationDate->setBrowseName(UaQualifiedName("NamespacePublicationDate", 0));
    pNamespacePublicationDate->setDisplayName(UaLocalizedText("", "NamespacePublicationDate"));
    pNamespacePublicationDate->setAccessLevel(1);
    pNamespacePublicationDate->setValueRank(-1);
    pNamespacePublicationDate->setDataTypeId(OpcUaId_DateTime);
    {
        defaultValue.setDateTime(UaDateTime::fromString("2020-09-25T00:00:00ZZ"));
    }
    pNamespacePublicationDate->setValue(defaultValue);
    pNamespacePublicationDate->setTypeDefinitionId(OpcUaId_PropertyType);
    reference.setReferenceTypeId(OpcUaId_HasProperty);
    reference.setSourceNode(phttp___opcfoundation_org_UA_BNM_);
    reference.setTargetNode(pNamespacePublicationDate);
    phttp___opcfoundation_org_UA_BNM_->addFullReference(reference);
    pNamespacePublicationDate->addFullReference(reference);
    pNamespacePublicationDate->setParentNodeId(phttp___opcfoundation_org_UA_BNM_->nodeId());

    // NamespaceUri
    UaBase::Variable *pNamespaceUri = new UaBase::Variable(UaNodeId(OpcUaClassBnmId_Server_Namespaces_http___opcfoundation_org_UA_BNM__NamespaceUri, getTypeNamespace()));
    pNamespaceUri->setBrowseName(UaQualifiedName("NamespaceUri", 0));
    pNamespaceUri->setDisplayName(UaLocalizedText("", "NamespaceUri"));
    pNamespaceUri->setAccessLevel(1);
    pNamespaceUri->setValueRank(-1);
    pNamespaceUri->setDataTypeId(OpcUaId_String);
    {
        defaultValue.setString("http://opcfoundation.org/UA/BNM/");
    }
    pNamespaceUri->setValue(defaultValue);
    pNamespaceUri->setTypeDefinitionId(OpcUaId_PropertyType);
    reference.setReferenceTypeId(OpcUaId_HasProperty);
    reference.setSourceNode(phttp___opcfoundation_org_UA_BNM_);
    reference.setTargetNode(pNamespaceUri);
    phttp___opcfoundation_org_UA_BNM_->addFullReference(reference);
    pNamespaceUri->addFullReference(reference);
    pNamespaceUri->setParentNodeId(phttp___opcfoundation_org_UA_BNM_->nodeId());

    // NamespaceVersion
    UaBase::Variable *pNamespaceVersion = new UaBase::Variable(UaNodeId(OpcUaClassBnmId_Server_Namespaces_http___opcfoundation_org_UA_BNM__NamespaceVersion, getTypeNamespace()));
    pNamespaceVersion->setBrowseName(UaQualifiedName("NamespaceVersion", 0));
    pNamespaceVersion->setDisplayName(UaLocalizedText("", "NamespaceVersion"));
    pNamespaceVersion->setAccessLevel(1);
    pNamespaceVersion->setValueRank(-1);
    pNamespaceVersion->setDataTypeId(OpcUaId_String);
    {
        defaultValue.setString("1.0.0");
    }
    pNamespaceVersion->setValue(defaultValue);
    pNamespaceVersion->setTypeDefinitionId(OpcUaId_PropertyType);
    reference.setReferenceTypeId(OpcUaId_HasProperty);
    reference.setSourceNode(phttp___opcfoundation_org_UA_BNM_);
    reference.setTargetNode(pNamespaceVersion);
    phttp___opcfoundation_org_UA_BNM_->addFullReference(reference);
    pNamespaceVersion->addFullReference(reference);
    pNamespaceVersion->setParentNodeId(phttp___opcfoundation_org_UA_BNM_->nodeId());

    // StaticNodeIdTypes
    UaBase::Variable *pStaticNodeIdTypes = new UaBase::Variable(UaNodeId(OpcUaClassBnmId_Server_Namespaces_http___opcfoundation_org_UA_BNM__StaticNodeIdTypes, getTypeNamespace()));
    pStaticNodeIdTypes->setBrowseName(UaQualifiedName("StaticNodeIdTypes", 0));
    pStaticNodeIdTypes->setDisplayName(UaLocalizedText("", "StaticNodeIdTypes"));
    pStaticNodeIdTypes->setAccessLevel(1);
    pStaticNodeIdTypes->setValueRank(1);
    pStaticNodeIdTypes->setDataTypeId(OpcUaId_IdType);
    {
        UaInt32Array valStaticNodeIdTypesArray;
        defaultValue.setInt32Array(valStaticNodeIdTypesArray);
    }
    pStaticNodeIdTypes->setValue(defaultValue);
    pStaticNodeIdTypes->setTypeDefinitionId(OpcUaId_PropertyType);
    reference.setReferenceTypeId(OpcUaId_HasProperty);
    reference.setSourceNode(phttp___opcfoundation_org_UA_BNM_);
    reference.setTargetNode(pStaticNodeIdTypes);
    phttp___opcfoundation_org_UA_BNM_->addFullReference(reference);
    pStaticNodeIdTypes->addFullReference(reference);
    pStaticNodeIdTypes->setParentNodeId(phttp___opcfoundation_org_UA_BNM_->nodeId());

    // StaticNumericNodeIdRange
    UaBase::Variable *pStaticNumericNodeIdRange = new UaBase::Variable(UaNodeId(OpcUaClassBnmId_Server_Namespaces_http___opcfoundation_org_UA_BNM__StaticNumericNodeIdRange, getTypeNamespace()));
    pStaticNumericNodeIdRange->setBrowseName(UaQualifiedName("StaticNumericNodeIdRange", 0));
    pStaticNumericNodeIdRange->setDisplayName(UaLocalizedText("", "StaticNumericNodeIdRange"));
    pStaticNumericNodeIdRange->setAccessLevel(1);
    pStaticNumericNodeIdRange->setValueRank(1);
    pStaticNumericNodeIdRange->setDataTypeId(OpcUaId_NumericRange);
    {
        UaStringArray valStaticNumericNodeIdRangeArray;
        defaultValue.setStringArray(valStaticNumericNodeIdRangeArray);
    }
    pStaticNumericNodeIdRange->setValue(defaultValue);
    pStaticNumericNodeIdRange->setTypeDefinitionId(OpcUaId_PropertyType);
    reference.setReferenceTypeId(OpcUaId_HasProperty);
    reference.setSourceNode(phttp___opcfoundation_org_UA_BNM_);
    reference.setTargetNode(pStaticNumericNodeIdRange);
    phttp___opcfoundation_org_UA_BNM_->addFullReference(reference);
    pStaticNumericNodeIdRange->addFullReference(reference);
    pStaticNumericNodeIdRange->setParentNodeId(phttp___opcfoundation_org_UA_BNM_->nodeId());

    // StaticStringNodeIdPattern
    UaBase::Variable *pStaticStringNodeIdPattern = new UaBase::Variable(UaNodeId(OpcUaClassBnmId_Server_Namespaces_http___opcfoundation_org_UA_BNM__StaticStringNodeIdPattern, getTypeNamespace()));
    pStaticStringNodeIdPattern->setBrowseName(UaQualifiedName("StaticStringNodeIdPattern", 0));
    pStaticStringNodeIdPattern->setDisplayName(UaLocalizedText("", "StaticStringNodeIdPattern"));
    pStaticStringNodeIdPattern->setAccessLevel(1);
    pStaticStringNodeIdPattern->setValueRank(-1);
    pStaticStringNodeIdPattern->setDataTypeId(OpcUaId_String);
    defaultValue.setString("");
    pStaticStringNodeIdPattern->setValue(defaultValue);
    pStaticStringNodeIdPattern->setTypeDefinitionId(OpcUaId_PropertyType);
    reference.setReferenceTypeId(OpcUaId_HasProperty);
    reference.setSourceNode(phttp___opcfoundation_org_UA_BNM_);
    reference.setTargetNode(pStaticStringNodeIdPattern);
    phttp___opcfoundation_org_UA_BNM_->addFullReference(reference);
    pStaticStringNodeIdPattern->addFullReference(reference);
    pStaticStringNodeIdPattern->setParentNodeId(phttp___opcfoundation_org_UA_BNM_->nodeId());

    OpcUa::NamespaceMetadataType *pObjectType = new OpcUa::NamespaceMetadataType(phttp___opcfoundation_org_UA_BNM_, (XmlUaNodeFactoryManager*) &factory, this);
    referenceTypeId = OpcUaId_HasComponent;
    ret = addNodeAndReference(OpcUaId_Server_Namespaces, pObjectType, referenceTypeId);
    UA_ASSERT(ret.isGood());
    delete pIsNamespaceSubset;
    delete pNamespacePublicationDate;
    delete pNamespaceUri;
    delete pNamespaceVersion;
    delete pStaticNodeIdTypes;
    delete pStaticNumericNodeIdRange;
    delete pStaticStringNodeIdPattern;
    delete phttp___opcfoundation_org_UA_BNM_;
    return ret;
}

UaStatus NodeManagerOpcUaClassBnmNSBase::addObjectsFolderServerResources(const XmlUaNodeFactoryManager &factory)
{
    UaStatus ret;
    UaVariant defaultValue;
    UaNodeId referenceTypeId;
    UaNodeId parentEventNodeId;
    UaBase::Object *pResources = new UaBase::Object(UaNodeId(OpcUaClassBnmId_Server_Resources, getTypeNamespace()));
    pResources->setBrowseName(UaQualifiedName("Resources", getTypeNamespace()));
    pResources->setDisplayName(UaLocalizedText("", "Resources"));
    UaBase::FullReference reference;
    OpcUa::FolderType *pObjectType = new OpcUa::FolderType(pResources, (XmlUaNodeFactoryManager*) &factory, this);
    referenceTypeId = OpcUaId_HasComponent;
    ret = addNodeAndReference(OpcUaId_Server, pObjectType, referenceTypeId);
    UA_ASSERT(ret.isGood());
    delete pResources;
    return ret;
}

UaStatus NodeManagerOpcUaClassBnmNSBase::addObjectsFolderServerResourcesCommunication(const XmlUaNodeFactoryManager &factory)
{
    UaStatus ret;
    UaVariant defaultValue;
    UaNodeId referenceTypeId;
    UaNodeId parentEventNodeId;
    UaBase::Object *pCommunication = new UaBase::Object(UaNodeId(OpcUaClassBnmId_Server_Resources_Communication, getTypeNamespace()));
    pCommunication->setBrowseName(UaQualifiedName("Communication", getTypeNamespace()));
    pCommunication->setDisplayName(UaLocalizedText("", "Communication"));
    UaBase::FullReference reference;
    OpcUa::FolderType *pObjectType = new OpcUa::FolderType(pCommunication, (XmlUaNodeFactoryManager*) &factory, this);
    referenceTypeId = OpcUaId_Organizes;
    ret = addNodeAndReference(UaNodeId(OpcUaClassBnmId_Server_Resources, getNameSpaceIndex()), pObjectType, referenceTypeId);
    UA_ASSERT(ret.isGood());
    delete pCommunication;
    return ret;
}


UaStatus NodeManagerOpcUaClassBnmNSBase::addAdditionalHierarchicalReferences()
{
    UaStatus ret;

    return ret;
}

UaStatus NodeManagerOpcUaClassBnmNSBase::addAdditionalNonHierarchicalReferences()
{
    UaStatus ret;

    return ret;
}

#if SUPPORT_Event_Subscription_Server_Facet
// browse from server object following HasEventSource references
UaStatus NodeManagerOpcUaClassBnmNSBase::recursiveRegisterEventSources(const UaNodeId& startingNode, std::set<UaNodeId>& setBrowsedNodes)
{
    UaStatus ret;

    if (setBrowsedNodes.find(startingNode) != setBrowsedNodes.end())
    {
        return OpcUa_Good;
    }

    ContinuationPointWrapper continuationPoint;
    UaReferenceDescriptions references;
    ret = m_pServerManager->browse(
        startingNode,
        OpcUa_False,
        UaNodeId(OpcUaId_HasEventSource),
        OpcUa_NodeClass_Object | OpcUa_NodeClass_Variable,
        continuationPoint,
        references);

    if (ret.isGood())
    {
        setBrowsedNodes.insert(startingNode);
        // only use NodeIds of this namespace
        for (OpcUa_UInt32 i = 0; i < references.length(); i++)
        {
            if (references[i].NodeId.NodeId.NamespaceIndex == getNameSpaceIndex())
            {
                // ToDo - right now this only works for HasEventSource and HasNotifier not for any subtypes of those reference types
                if (references[i].ReferenceTypeId.NamespaceIndex == 0 && references[i].ReferenceTypeId.Identifier.Numeric == OpcUaId_HasEventSource)
                {
                    registerEventSource(startingNode, UaNodeId(references[i].NodeId.NodeId));
                    recursiveRegisterEventSources(references[i].NodeId.NodeId, setBrowsedNodes);
                }
                else if (references[i].ReferenceTypeId.NamespaceIndex == 0 && references[i].ReferenceTypeId.Identifier.Numeric == OpcUaId_HasNotifier)
                {
                    registerEventNotifier(startingNode, UaNodeId(references[i].NodeId.NodeId));
                    recursiveRegisterEventSources(references[i].NodeId.NodeId, setBrowsedNodes);
                }
            }
        }
    }
    return ret;
}
#endif // SUPPORT_Event_Subscription_Server_Facet


} // End namespace for the UA information model http://opcfoundation.org/UA/BNM/



