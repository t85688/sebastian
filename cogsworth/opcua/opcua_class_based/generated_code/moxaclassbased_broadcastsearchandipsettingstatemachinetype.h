/******************************************************************************
** moxaclassbased_broadcastsearchandipsettingstatemachinetype.h
**
**   **************************** auto-generated ****************************
**     This code was generated by a tool: UaModeler
**     Runtime Version: 1.8.0, using C++ OPC UA SDK 1.8.2 template (version 4)
**
**     This is a template file that was generated for your convenience.
**     This file will not be overwritten when generating code again.
**     ADD YOUR IMPLEMTATION HERE!
**   **************************** auto-generated ****************************
**
** Copyright (c) 2006-2025 Unified Automation GmbH. All rights reserved.
**
** Software License Agreement ("SLA") Version 2.8
**
** Unless explicitly acquired and licensed from Licensor under another
** license, the contents of this file are subject to the Software License
** Agreement ("SLA") Version 2.8, or subsequent versions
** as allowed by the SLA, and You may not copy or use this file in either
** source code or executable form, except in compliance with the terms and
** conditions of the SLA.
**
** All software distributed under the SLA is provided strictly on an
** "AS IS" basis, WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
** AND LICENSOR HEREBY DISCLAIMS ALL SUCH WARRANTIES, INCLUDING WITHOUT
** LIMITATION, ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR
** PURPOSE, QUIET ENJOYMENT, OR NON-INFRINGEMENT. See the SLA for specific
** language governing rights and limitations under the SLA.
**
** The complete license agreement can be found here:
** http://unifiedautomation.com/License/SLA/2.8/
**
** Project: C++ OPC Server SDK information model for namespace
*http://www.moxa.com/auto-configuration-tool-class-based-model/
**
** Description: OPC Unified Architecture Software Development Kit.
**
******************************************************************************/

#ifndef __MOXACLASSBASED_BROADCASTSEARCHANDIPSETTINGSTATEMACHINETYPE_H__
#define __MOXACLASSBASED_BROADCASTSEARCHANDIPSETTINGSTATEMACHINETYPE_H__

#include <QMap>
#include <future>

#include "moxaclassbased_broadcastsearchandipsettingstatemachinetypebase.h"

// Namespace for the UA information model http://www.moxa.com/auto-configuration-tool-class-based-model/
namespace MoxaClassBased {

/** @brief Class implementing the UaObject interface for the BroadcastSearchAndIPSettingStateMachineType.
 *
 * OPC UA Objects are used to represent systems, system components, real-world objects and software
 * objects. They have the NodeClass Object. The detailed description of Objects and their attributes
 * can be found in the general description of the Object node class.
 *
 *  **Object members of the BroadcastSearchAndIPSettingStateMachineType:**
 *
 *  Browse Name                                        | TypeDefinition | Modelling Rule | See Also
 *  ---------------------------------------------------|----------------|----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------
 *  DeviceDiscovered                                   | StateType      | Mandatory      | \ref
 * BroadcastSearchAndIPSettingStateMachineTypeBase::getDeviceDiscovered "getDeviceDiscovered" DeviceDiscoveredToInit |
 * TransitionType | Mandatory      | \ref BroadcastSearchAndIPSettingStateMachineTypeBase::getDeviceDiscoveredToInit
 * "getDeviceDiscoveredToInit" DeviceDiscoveredToLinkSequenceDetecting            | TransitionType | Mandatory      |
 * \ref BroadcastSearchAndIPSettingStateMachineTypeBase::getDeviceDiscoveredToLinkSequenceDetecting
 * "getDeviceDiscoveredToLinkSequenceDetecting" DeviceDiscoveredToRetryConnection                  | TransitionType |
 * Mandatory      | \ref BroadcastSearchAndIPSettingStateMachineTypeBase::getDeviceDiscoveredToRetryConnection
 * "getDeviceDiscoveredToRetryConnection" DeviceDiscovering                                  | StateType      |
 * Mandatory      | \ref BroadcastSearchAndIPSettingStateMachineTypeBase::getDeviceDiscovering "getDeviceDiscovering"
 *  DeviceDiscoveringFailed                            | StateType      | Mandatory      | \ref
 * BroadcastSearchAndIPSettingStateMachineTypeBase::getDeviceDiscoveringFailed "getDeviceDiscoveringFailed"
 *  DeviceDiscoveringFailedToInit                      | TransitionType | Mandatory      | \ref
 * BroadcastSearchAndIPSettingStateMachineTypeBase::getDeviceDiscoveringFailedToInit "getDeviceDiscoveringFailedToInit"
 *  DeviceDiscoveringToDeviceDiscovered                | TransitionType | Mandatory      | \ref
 * BroadcastSearchAndIPSettingStateMachineTypeBase::getDeviceDiscoveringToDeviceDiscovered
 * "getDeviceDiscoveringToDeviceDiscovered" DeviceDiscoveringToDeviceDiscoveringFailed         | TransitionType |
 * Mandatory      | \ref BroadcastSearchAndIPSettingStateMachineTypeBase::getDeviceDiscoveringToDeviceDiscoveringFailed
 * "getDeviceDiscoveringToDeviceDiscoveringFailed" DiscoveredDevices                                  | FolderType     |
 * Mandatory      | \ref BroadcastSearchAndIPSettingStateMachineTypeBase::getDiscoveredDevices "getDiscoveredDevices"
 *  Init                                               | StateType      | Mandatory      | \ref
 * BroadcastSearchAndIPSettingStateMachineTypeBase::getInit "getInit" InitToDeviceDiscovering | TransitionType |
 * Mandatory      | \ref BroadcastSearchAndIPSettingStateMachineTypeBase::getInitToDeviceDiscovering
 * "getInitToDeviceDiscovering" IpConfigured                                       | StateType      | Mandatory      |
 * \ref BroadcastSearchAndIPSettingStateMachineTypeBase::getIpConfigured "getIpConfigured" IpConfiguredToInit |
 * TransitionType | Mandatory      | \ref BroadcastSearchAndIPSettingStateMachineTypeBase::getIpConfiguredToInit
 * "getIpConfiguredToInit" IpConfiguring                                      | StateType      | Mandatory      | \ref
 * BroadcastSearchAndIPSettingStateMachineTypeBase::getIpConfiguring "getIpConfiguring" IpConfiguringFailed | StateType
 * | Mandatory      | \ref BroadcastSearchAndIPSettingStateMachineTypeBase::getIpConfiguringFailed
 * "getIpConfiguringFailed" IpConfiguringFailedToInit                          | TransitionType | Mandatory      | \ref
 * BroadcastSearchAndIPSettingStateMachineTypeBase::getIpConfiguringFailedToInit "getIpConfiguringFailedToInit"
 *  IpConfiguringFailedToIpConfiguring                 | TransitionType | Mandatory      | \ref
 * BroadcastSearchAndIPSettingStateMachineTypeBase::getIpConfiguringFailedToIpConfiguring
 * "getIpConfiguringFailedToIpConfiguring" IpConfiguringToIpConfigured                        | TransitionType |
 * Mandatory      | \ref BroadcastSearchAndIPSettingStateMachineTypeBase::getIpConfiguringToIpConfigured
 * "getIpConfiguringToIpConfigured" IpConfiguringToIpConfiguringFailed                 | TransitionType | Mandatory |
 * \ref BroadcastSearchAndIPSettingStateMachineTypeBase::getIpConfiguringToIpConfiguringFailed
 * "getIpConfiguringToIpConfiguringFailed" LinkSequenceDetected                               | StateType      |
 * Mandatory      | \ref BroadcastSearchAndIPSettingStateMachineTypeBase::getLinkSequenceDetected
 * "getLinkSequenceDetected" LinkSequenceDetectedToInit                         | TransitionType | Mandatory      | \ref
 * BroadcastSearchAndIPSettingStateMachineTypeBase::getLinkSequenceDetectedToInit "getLinkSequenceDetectedToInit"
 *  LinkSequenceDetectedToIpConfiguring                | TransitionType | Mandatory      | \ref
 * BroadcastSearchAndIPSettingStateMachineTypeBase::getLinkSequenceDetectedToIpConfiguring
 * "getLinkSequenceDetectedToIpConfiguring" LinkSequenceDetecting                              | StateType      |
 * Mandatory      | \ref BroadcastSearchAndIPSettingStateMachineTypeBase::getLinkSequenceDetecting
 * "getLinkSequenceDetecting" LinkSequenceDetectingFailed                        | StateType      | Mandatory      |
 * \ref BroadcastSearchAndIPSettingStateMachineTypeBase::getLinkSequenceDetectingFailed "getLinkSequenceDetectingFailed"
 *  LinkSequenceDetectingFailedToInit                  | TransitionType | Mandatory      | \ref
 * BroadcastSearchAndIPSettingStateMachineTypeBase::getLinkSequenceDetectingFailedToInit
 * "getLinkSequenceDetectingFailedToInit" LinkSequenceDetectingFailedToIpConfiguring         | TransitionType |
 * Mandatory      | \ref BroadcastSearchAndIPSettingStateMachineTypeBase::getLinkSequenceDetectingFailedToIpConfiguring
 * "getLinkSequenceDetectingFailedToIpConfiguring" LinkSequenceDetectingFailedToRetryConnection       | TransitionType |
 * Mandatory      | \ref
 * BroadcastSearchAndIPSettingStateMachineTypeBase::getLinkSequenceDetectingFailedToRetryConnection
 * "getLinkSequenceDetectingFailedToRetryConnection" LinkSequenceDetectingToLinkSequenceDetected        | TransitionType
 * | Mandatory      | \ref
 * BroadcastSearchAndIPSettingStateMachineTypeBase::getLinkSequenceDetectingToLinkSequenceDetected
 * "getLinkSequenceDetectingToLinkSequenceDetected" LinkSequenceDetectingToLinkSequenceDetectingFailed | TransitionType
 * | Mandatory      | \ref
 * BroadcastSearchAndIPSettingStateMachineTypeBase::getLinkSequenceDetectingToLinkSequenceDetectingFailed
 * "getLinkSequenceDetectingToLinkSequenceDetectingFailed" RetryConnection                                    |
 * StateType      | Mandatory      | \ref BroadcastSearchAndIPSettingStateMachineTypeBase::getRetryConnection
 * "getRetryConnection" RetryConnectionToDeviceDiscovered                  | TransitionType | Mandatory      | \ref
 * BroadcastSearchAndIPSettingStateMachineTypeBase::getRetryConnectionToDeviceDiscovered
 * "getRetryConnectionToDeviceDiscovered"
 *
 *  **Variable members of the BroadcastSearchAndIPSettingStateMachineType:**
 *
 *  Browse Name  | DataType | TypeDefinition       | Modelling Rule | See Also
 *  -------------|----------|----------------------|----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 *  ErrorCode    | UInt32   | BaseDataVariableType | Mandatory      | \ref
 * BroadcastSearchAndIPSettingStateMachineTypeBase::getErrorCode "getErrorCode", \ref
 * BroadcastSearchAndIPSettingStateMachineTypeBase::setErrorCode "setErrorCode" ErrorMessage | String   |
 * BaseDataVariableType | Mandatory      | \ref BroadcastSearchAndIPSettingStateMachineTypeBase::getErrorMessage
 * "getErrorMessage", \ref BroadcastSearchAndIPSettingStateMachineTypeBase::setErrorMessage "setErrorMessage"
 *
 *  **Method members of the BroadcastSearchAndIPSettingStateMachineType:**
 *
 *  Browse Name                  | Modelling Rule
 *  -----------------------------|---------------
 *  \ref GetDiscoveredDevices    | Mandatory
 *  \ref StartInit               | Mandatory
 *  \ref StartDeviceDiscovery    | Mandatory
 *  \ref StartIpConfigure        | Mandatory
 *  \ref StartRetryConnection    | Mandatory
 *  \ref StartLinkSequenceDetect | Mandatory
 *
 */
class MoxaClassBased_EXPORT BroadcastSearchAndIPSettingStateMachineType
    : public BroadcastSearchAndIPSettingStateMachineTypeBase,
      public UaThread {
  UA_DISABLE_COPY(BroadcastSearchAndIPSettingStateMachineType);

 protected:
  // destruction
  virtual ~BroadcastSearchAndIPSettingStateMachineType();

 public:
  // construction
  BroadcastSearchAndIPSettingStateMachineType(const UaNodeId& nodeId, UaObject* pInstanceDeclarationObject,
                                              NodeManagerConfig* pNodeConfig, UaMutexRefCounted* pSharedMutex = NULL);
  BroadcastSearchAndIPSettingStateMachineType(const UaNodeId& nodeId, const UaString& name,
                                              OpcUa_UInt16 browseNameNameSpaceIndex, NodeManagerConfig* pNodeConfig,
                                              UaMutexRefCounted* pSharedMutex = NULL);
  BroadcastSearchAndIPSettingStateMachineType(UaBase::Object* pBaseNode, XmlUaNodeFactoryManager* pFactory,
                                              NodeManagerConfig* pNodeConfig, UaMutexRefCounted* pSharedMutex = NULL);
  static void createTypes();
  static void clearStaticMembers();

  // UaBroadcastSearchAndIPSettingStateMachineType method GetDiscoveredDevices
  virtual UaStatus GetDiscoveredDevices(const ServiceContext& serviceContext,
                                        MoxaClassBased::DiscoveredDeviceDataTypes& DiscoveredDevices);
  // UaBroadcastSearchAndIPSettingStateMachineType method StartDeviceDiscovery
  virtual UaStatus StartDeviceDiscovery(const ServiceContext& serviceContext,
                                        const MoxaClassBased::DeviceDiscoveryDataType& Configuration);
  // UaBroadcastSearchAndIPSettingStateMachineType method StartInit
  virtual UaStatus StartInit(const ServiceContext& serviceContext);
  // UaBroadcastSearchAndIPSettingStateMachineType method StartIpConfigure
  virtual UaStatus StartIpConfigure(const ServiceContext& serviceContext,
                                    const MoxaClassBased::IpConfigureDataTypes& Configuration);
  // UaBroadcastSearchAndIPSettingStateMachineType method StartLinkSequenceDetect
  virtual UaStatus StartLinkSequenceDetect(const ServiceContext& serviceContext);
  // UaBroadcastSearchAndIPSettingStateMachineType method StartRetryConnection
  virtual UaStatus StartRetryConnection(const ServiceContext& serviceContext, const MoxaClassBased::SNMPDataType& SNMP,
                                        const MoxaClassBased::RESTfulDataType& RESTful);

  // user add
  std::shared_ptr<std::promise<void>> signal_sender;

  virtual void run();
  UaStatus setBroadcastSearchAndIPSettingState(BroadcastSearchAndIPSettingState state);

  QMap<UaString, void*> discoveredBridgeMap;

  DeviceDiscoveryDataType deviceDiscoveryData;
  IpConfigureDataTypes ipConfigureDataList;
  SNMPDataType SNMPData;
  RESTfulDataType RESTfulData;

 protected:
 private:
};

}  // namespace MoxaClassBased

#endif  // #ifndef __MOXACLASSBASEDBROADCASTSEARCHANDIPSETTINGSTATEMACHINETYPE_H__
